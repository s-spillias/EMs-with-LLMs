Assessment of current model (structural, in absence of residuals file)
- Fit to data:
  - Quantitative assessment is limited because the residuals file was not provided. Structurally, the model is well-posed (no data leakage in the state updates; observation models on appropriate scales).
  - Expected misfit patterns:
    - Timing of outbreaks may be delayed or damped if recruitment success is tied positively to coral cover, because when coral is low (after bleaching or prior predation) recruitment remains suppressed in the current structure.
    - Coral consumption may be over-responsive at moderate densities if eta exponents and handling time do not capture strong low-prey refuges (less critical than outbreak timing).

- Alignment with PROJECT CONTEXT (episodic outbreaks, boom-bust, selective predation):
  - Strengths:
    - Adult and juvenile stages with Allee effect can produce thresholds and nonlinear responses.
    - Multi-prey functional response distinguishes fast vs slow coral feeding, and coral growth uses shared carrying capacity.
    - Temperature affects both recruitment (Gaussian) and coral growth/bleaching.
  - Gaps affecting outbreak dynamics:
    - Recruitment success depends on coral cover via a positive “resource” term (weighted sum of fast/slow coral). This is ecologically misaligned; larval/early juvenile stages depend more on open substrate/algal food rather than coral abundance. This can impede realistic outbreak initiation following coral loss.
    - No explicit representation of environmental nutrient pulses (e.g., runoff-driven larval survival), which are known outbreak triggers. Given the lack of nutrient covariates here, we target the substrate mechanism as a tractable proxy improvement.

- Key ecological processes missing or oversimplified:
  1) Early-life habitat mediation: Open substrate and algal films benefit early juvenile survival/settlement; current model uses coral cover as a positive resource for recruitment, creating the opposite effect.
  2) Distributed reproductive lags: Outbreaks may reflect multi-year conditioning of spawning biomass and environmental windows; this is only indirectly captured via the juvenile pool with a single-year maturation fraction.
  3) External nutrient variability: Not modeled due to missing covariates; remains a candidate for future extensions.

Chosen improvement (one change): Open-substrate-mediated recruitment success
- Rationale:
  - After coral loss (bleaching or predation), open substrate increases, promoting algal films and juvenile shelter. This can seed outbreaks if adult densities exceed Allee thresholds. Incorporating this mechanism provides a realistic indirect negative feedback between coral cover and recruitment success that can sharpen outbreak timing and magnitude.
- Mathematical form:
  - Define open substrate O_t-1 = max(0, 100 - (F_t-1 + S_t-1)).
  - Define a saturating modifier f_sub = O_t-1 / (K_sub + O_t-1), with K_sub a half-saturation parameter (%).
  - Recruitment becomes:
      Rec_t-1 = alpha_rec * C_t-1^phi * f_Allee(C_t-1) * f_sub(O_t-1) * f_Trec(SST_t-1) + cotsimm_t-1
  - This replaces the previous coral-based resource index f_food = (wF*F + wS*S)/(K_R + wF*F + wS*S).

Expected effects on residuals and dynamics:
- Earlier or more pronounced recruitment following coral declines, improving alignment with observed boom-bust cycles.
- Reduced bias in recruitment during low-coral phases.
- Maintains smoothness and differentiability for estimation.

Parameter updates:
- Added K_sub (units: % cover) with suggested bounds [1, 100]. Initial value 20.0 (%). Ecological meaning: half-saturation of open-substrate availability for juvenile survival/settlement.
- Removed K_R, wF, wS (no longer used).
- All other parameters unchanged. T_opt_bleach remains updated from literature with compatible functional form.

Notes and further work (if residuals are provided):
- If residuals indicate under-predicted outbreak onset even after this change, consider adding an environmental (nutrient/runoff) year effect to recruitment survival or a simple distributed spawning memory term.
- If coral loss is still overpredicted, adjust eta exponents or include prey-specific refuge terms at low cover.

Data leakage check:
- The recruitment modifier uses F_prev and S_prev (predicted states from t-1), not current observations, consistent with no data leakage.

Please provide the residuals file to refine diagnostics and evaluate the improvement quantitatively.
