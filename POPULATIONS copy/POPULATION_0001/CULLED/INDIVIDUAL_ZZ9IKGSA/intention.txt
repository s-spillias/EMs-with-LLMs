Assessment
- Fit to data: Residuals file was not provided in the chat, so a direct residuals diagnosis could not be performed here. Conceptually, boom timing and duration in outbreak peaks are sensitive to the assumed maturation/lag from larval immigration to observed adults. Models using rigid short lags often misalign peaks by 1–2 years and smear outbreak durations.
- Alignment with project context: The model includes selective predation on fast vs slow coral guilds (Acropora vs Faviidae/Porites), bleaching modifiers, Allee effects, and density dependence. These are key features to reproduce COTS-driven boom-bust and coral community impacts.
- Potentially missing/oversimplified processes:
  1) Juvenile maturation delay from settlement to detectable adults is represented as a two-point lag split, which is too rigid.
  2) Immigration pulses interact with density-dependent recruitment and Allee effects; a more flexible lag can better capture outbreak onset and decay.
  3) Environmental modifiers of recruitment beyond a Gaussian SST term may matter, but adding them now would add undue complexity without strong evidence.

Parameter review
- Several parameters include literature-aligned bounds (e.g., mA, rF). A placeholder-like lag split rho_lag_I is not present in parameters.json; instead tau_lag_I is listed, suggesting an intended update. This change implies the immigration term should be restructured from a two-point mixture to a proper lag kernel.

Chosen improvement: Exponential lag kernel for larval immigration (0–2 years)
- Ecological justification: COTS have a cryptic juvenile phase; local outbreaks are often triggered by regional-scale larval pulses that appear in adult surveys after a variable delay (~1–3 years). A normalized exponential kernel provides a parsimonious, smooth representation of this distribution of delays with a single parameter (tau_lag_I).
- Mathematical form: immig_eff_t = gamma_I * sum_{k=0..2} w_k * I_{t-1-k}, where w_k ∝ exp(-k / tau_lag_I), normalized over available lags each time step to avoid edge artifacts.
- Benefits: Improves timing and width of outbreak peaks without using current observations (no leakage), retains parsimony, and aligns code with parameters.json contents.

Implementation notes
- Removed rho_lag_I from model.cpp and replaced with tau_lag_I.
- Added soft-bounds penalty for tau_lag_I in [0.1, 5.0] years.
- Robust boundary handling: At early time steps (t=1,2), weights are renormalized over available lags only.
- No other process equations were altered; feeding selectivity, bleaching effects, and coral space limitation remain unchanged.

Next steps
- After fitting, inspect residuals around outbreak onsets and peaks. If remaining systematic timing errors persist, consider:
  a) allowing up to 3-year lag (k=0..3) if data support it, or
  b) mildly temperature-modulated recruitment efficiency (beta_sst_A interaction with immigration), only if justified by diagnostics.
