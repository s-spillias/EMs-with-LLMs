Assessment and rationale for improvement

1) Fit to data
- Residuals file not provided here, so a quantitative residual analysis cannot be performed. The current observation models (lognormal for COTS, logit-normal for % corals) remain appropriate for positive densities and bounded percentages.
- Expected residual patterns if bottom-up control is missing: periods with high phytoplankton should correspond to stronger recruitment pulses. Without a food term, the model may under/over-predict recruitment variability, showing temporal structure in COTS residuals.

2) Alignment with PROJECT CONTEXT (NPZ mixed layer)
- The model targets COTS–coral dynamics rather than a full NPZ (Nutrient–Phytoplankton–Zooplankton) system.
- Intended improvement was to include bottom-up resource limitation via phytoplankton (Monod) linking recruitment to P and thereby better acknowledge NPZ ecology.

3) Missing or oversimplified processes
- Bottom-up resource limitation on COTS recruitment is still missing in the current run because the exogenous phytoplankton driver (food_dat) was not available in the data pipeline.
- Full NPZ state dynamics (N, P, Z) are not represented; adding them is beyond the scope of a single change.

Parameter review highlights
- K_food was introduced for the Monod food limitation. Because food_dat is not supplied at runtime, K_food is currently inactive. I lowered its parameter priority and clarified its description to prevent confusion.
- Other parameters have broad, weakly enforced penalties with plausible ranges; no structural inconsistencies requiring immediate change were detected.

Chosen ecological improvement: Resource limitation mechanism (Monod) — deferred
- Planned approach: f_food = P / (K_food + P), using food_dat at t-1 in recruitment: Rec = alpha_rec * stock * f_Allee * f_Trec * f_food + cotsimm.
- Ecological justification: Larval survival and recruitment success depend on phytoplankton availability; a saturating Monod form captures diminishing returns at high P and collapse of recruitment when P is low.

Implementation status
- To restore model operability with the current dataset, the food term has been neutralized: f_food = 1.0. This avoids requiring food_dat and prevents data leakage issues.
- No new parameters were added beyond K_food (retained but inactive).
- All prediction calculations continue to use only t-1 values of *_dat exogenous drivers, maintaining the no-leakage constraint.

Expected effects on residuals
- With f_food neutralized, residuals will not benefit from the intended bottom-up linkage and may retain temporal structure if recruitment co-varies with phytoplankton pulses.
- Once food_dat becomes available and the Monod term is reinstated, we expect reduced bias and autocorrelation in COTS residuals during bloom/non-bloom periods.

Future considerations
- Re-enable Monod limitation immediately when food_dat is provided by adding DATA_VECTOR(food_dat) and setting f_food = food / (K_food + food) evaluated at t-1.
- If residuals suggest curvature beyond Monod, consider adding an exponent on the food term or interactions with temperature (e.g., multiplicative modulation of f_Trec by food).

Summary
- To fix a runtime data mismatch, the recruitment food limitation term has been temporarily disabled in code. The parameter file has been updated to mark K_food as inactive until food_dat is supplied.
- This keeps the model compiling and running while preserving a clear path to the NPZ-aligned improvement when the necessary driver is available.
