# Model Improvement: Adaptive Feeding Preference in Crown-of-Thorns Starfish

## Current Model Performance
Based on the comparison plots between historical and modeled data, the current model shows several limitations:

1. **Slow-growing coral dynamics**: The model consistently underestimates peaks in slow-growing coral cover, particularly around 1990-1992 where historical data shows a dramatic spike that the model fails to capture.

2. **COTS population dynamics**: The model doesn't adequately capture the sharp fluctuations in COTS populations, especially during outbreak periods.

3. **Fast-growing coral dynamics**: While the model performs better for fast-growing coral, it still misses some of the temporal patterns, particularly in the 1985-1990 period.

## Ecological Improvement: Adaptive Feeding Preference

I've implemented an adaptive feeding preference mechanism for Crown-of-Thorns Starfish (COTS) that better represents their foraging behavior in response to changing coral composition. This improvement addresses a key ecological feedback in the system:

### Ecological Justification
COTS typically prefer to feed on fast-growing branching corals due to their higher nutritional value and easier accessibility. However, studies have shown that when their preferred coral prey becomes scarce, COTS can shift their feeding preference to less-preferred slow-growing massive corals. This adaptive feeding behavior creates an important feedback mechanism in the system:

1. As COTS consume fast-growing corals, the relative abundance of these corals decreases
2. When fast-growing corals drop below a certain threshold proportion, COTS begin to shift their feeding preference toward slow-growing corals
3. This shift in feeding pressure allows fast-growing corals to recover while increasing pressure on slow-growing corals
4. The resulting changes in coral community composition then influence future COTS feeding patterns

### Implementation Details
The adaptive feeding preference is implemented using:

1. A calculation of the proportion of fast-growing coral relative to total coral cover
2. A linear preference shift function that activates when fast-growing coral drops below a threshold proportion
3. Dynamic adjustment of attack rates on both coral types based on this preference shift

I've added a new parameter:
- `pref_shift_threshold`: The proportion of fast-growing coral below which COTS begin to shift their feeding preference (set to 0.4)

I've also made several numerical stability improvements:
- Limited the maximum reduction in fast coral attack rate to 30% (previously 50%)
- Limited the maximum increase in slow coral attack rate to 70% (previously 100%)
- Added bounds to ensure predation cannot exceed available coral
- Added safeguards to prevent negative growth terms due to competition

### Expected Improvements
This mechanism should improve model performance by:

1. Better capturing the cyclical dynamics between COTS and coral populations
2. More accurately representing the recovery patterns of both coral types after COTS outbreaks
3. Creating more realistic feedback between coral community composition and COTS predation pressure
4. Improving the model's ability to capture the observed peaks and troughs in all three state variables

The adaptive feeding preference represents a biologically realistic mechanism that adds an important feedback loop to the system without excessive complexity. I've simplified the mathematical implementation to use a basic linear function with additional safeguards to improve numerical stability while maintaining the same ecological behavior.
